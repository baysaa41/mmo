{% extends 'base.html' %}

{% block title %}ID-гаар нэмэх - {{ province.name }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'my_managed_provinces' %}">Миний аймгууд</a></li>
            <li class="breadcrumb-item"><a href="{% url 'province_dashboard' province.id %}">{{ province.name }}</a></li>
            <li class="breadcrumb-item"><a href="{% url 'province_olympiad_view' province.id olympiad.id %}">{{ olympiad.name }} - {{ olympiad.level.name }}</a></li>
            <li class="breadcrumb-item active">ID-гаар нэмэх</li>
        </ol>
    </nav>

    {% if is_teacher_olympiad %}
        <h2>Хэрэглэгчийн ID-гаар багш нэмэх</h2>
    {% else %}
        <h2>Хэрэглэгчийн ID-гаар сурагч нэмэх</h2>
    {% endif %}
    <p class="text-muted">{{ olympiad.name }} - {{ olympiad.level.name }} | {{ province.name }}</p>

    <div class="alert alert-info">
        <strong>Анхаар:</strong>
        <ul class="mb-0">
            <li>Хэрэглэгчийн ID-г таслал, зай эсвэл мөрөөр тусгаарлан оруулна.</li>
            <li>Жишээ: 123, 456, 789 эсвэл мөр бүрт нэг ID</li>
            {% if is_teacher_olympiad %}
                <li>Багш нар бүх аймгаас нэмэгдэж болно.</li>
                <li>Багш аль хэдийн Round 2-т бүртгэлтэй бол дахин нэмэхгүй.</li>
            {% else %}
                <li>Зөвхөн {{ province.name }} аймгийн сурагчдыг нэмнэ.</li>
                <li>Сурагч аль хэдийн Round 2-т бүртгэлтэй бол дахин нэмэхгүй.</li>
            {% endif %}
        </ul>
    </div>

    <form method="post">
        {% csrf_token %}

        <div class="mb-3">
            <label for="user_ids" class="form-label">Хэрэглэгчийн ID-ууд:</label>
            <textarea name="user_ids"
                      id="user_ids"
                      class="form-control"
                      rows="10"
                      placeholder="123, 456, 789&#10;эсвэл&#10;123&#10;456&#10;789"
                      required></textarea>
            <div class="form-text">
                ID-уудыг таслал (,), зай эсвэл мөрөөр тусгаарлан оруулна уу.
            </div>
        </div>

        <div class="d-flex gap-2">
            {% if is_teacher_olympiad %}
                <button type="submit" class="btn btn-primary">Багш нарыг нэмэх</button>
            {% else %}
                <button type="submit" class="btn btn-primary">Сурагчдыг нэмэх</button>
            {% endif %}
            <a href="{% url 'province_olympiad_view' province.id olympiad.id %}"
               class="btn btn-secondary">Буцах</a>
        </div>
    </form>
</div>
{% endblock %}
