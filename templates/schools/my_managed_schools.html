{% extends 'base.html' %}

{% block content %}
<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">–ú–∏–Ω–∏–π —É–¥–∞—Ä–¥–∞–∂ –±–∞–π–≥–∞–∞ —Å—É—Ä–≥—É—É–ª–∏—É–¥</h2>
        <a href="{% url 'all_schools_registry' %}" class="btn btn-outline-primary">üìã –°—É—Ä–≥—É—É–ª–∏–π–Ω –±“Ø—Ä—Ç–≥—ç–ª</a>
    </div>

    {% if user.is_staff %}
        <div class="mb-3">
            <a href="{% url 'manage_all_schools' %}" class="btn btn-warning">‚öôÔ∏è –ë“Ø—Ö —Å—É—Ä–≥—É—É–ª–∏–π–≥ —É–¥–∏—Ä–¥–∞—Ö</a>
        </div>
    {% endif %}

    {% if my_schools %}
        <p class="text-muted">–¢–∞ –¥–æ–æ—Ä—Ö —Å—É—Ä–≥—É—É–ª–∏—É–¥—ã–Ω –º—ç–¥—ç—ç–ª–ª–∏–π–≥ —É–¥–∏—Ä–¥–∞—Ö –±–æ–ª–æ–º–∂—Ç–æ–π. –°—É—Ä–≥—É—É–ª–∏–π–Ω –Ω—ç—Ä –¥—ç—ç—Ä –¥–∞—Ä–∂ —É–¥–∏—Ä–¥–ª–∞–≥—ã–Ω —Å–∞–º–±–∞—Ä –ª—É—É –æ—Ä–Ω–æ —É—É.</p>

        <div class="list-group mt-3">
            {% for school in my_schools %}
                <a href="{% url 'school_dashboard' school.id %}" class="list-group-item list-group-item-action">
                    <div class="d-flex w-100 justify-content-between">
                        <h5 class="mb-1">{{ school.name }}</h5>
                        <small class="text-muted">{{ school.province.name }}</small>
                    </div>
                    <div class="mt-2">
                        {% if school.manager %}
                            <small><strong>–ú–µ–Ω–µ–∂–µ—Ä:</strong> {{ school.manager.get_full_name|default:school.manager.username }} ({{ school.manager.username }})</small>
                        {% endif %}
                        {% if school.user %}
                            <small class="ms-3"><strong>–ë“Ø—Ä—Ç–≥—ç–≥—á –±–∞–≥—à:</strong> {{ school.user.get_full_name|default:school.user.username }} ({{ school.user.username }})</small>
                        {% else %}
                            <small class="text-muted ms-3"><strong>–ë“Ø—Ä—Ç–≥—ç–≥—á –±–∞–≥—à:</strong> (–¢–æ–¥–æ—Ä—Ö–æ–π–≥“Ø–π)</small>
                        {% endif %}
                    </div>
                    <div class="mt-1">
                        {% if school.manager == user %}
                            <span class="badge bg-success">–ú–µ–Ω–µ–∂–µ—Ä</span>
                        {% endif %}
                        {% if school.user == user %}
                            <span class="badge bg-info">–ë“Ø—Ä—Ç–≥—ç–≥—á –±–∞–≥—à</span>
                        {% endif %}
                        {% if user.is_staff %}
                            <span class="badge bg-warning">–ê–¥–º–∏–Ω</span>
                        {% endif %}
                    </div>
                </a>
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info">
            <h5>–¢–∞–Ω—ã —É–¥–∏—Ä–¥–ª–∞–≥–∞–¥ –±“Ø—Ä—Ç–≥—ç–ª—Ç—ç–π —Å—É—Ä–≥—É—É–ª—å –æ–¥–æ–æ–≥–æ–æ—Ä –±–∞–π—Ö–≥“Ø–π –±–∞–π–Ω–∞.</h5>
            <p class="mb-0">–¢–∞ <a href="{% url 'all_schools_registry' %}" class="alert-link">–°—É—Ä–≥—É—É–ª–∏–π–Ω –±“Ø—Ä—Ç–≥—ç–ª</a> —Ö—É—É–¥–∞—Å–Ω–∞–∞—Å –±—É—Å–∞–¥ —Å—É—Ä–≥—É—É–ª–∏—É–¥—ã–≥ “Ø–∑—ç–∂ –±–æ–ª–Ω–æ.</p>
        </div>
    {% endif %}
</div>
{% endblock %}
