{% extends "base.html" %}
{% block content %}
    <h2>{{ olympiad.name }}, {{ olympiad.level.name }} ангилал – Статистик</h2>

    <!-- Сонголтын меню -->
    {% include "selection_menu.html" %}

    <h3>Эхний 50 байр – Сургууль
        <small class="text-muted">(Нийт {{ top50_count }} сурагч)</small>
    </h3>
    <table class="table table-bordered">
        <tr>
            <th>Сургууль</th>
            <th>Сурагчдын тоо</th>
        </tr>
        {% for row in top50_by_school %}
            <tr>
                <td>{{ row.school__name }}</td>
                <td>{{ row.count }}</td>
            </tr>
        {% endfor %}
    </table>

    <h3>Эхний 30 байр – Аймаг/Дүүрэг
        <small class="text-muted">(Нийт {{ top30_count }} сурагч)</small>
    </h3>
    <table class="table table-bordered">
        <tr>
            <th>Аймаг/Дүүрэг</th>
            <th>Сурагчдын тоо</th>
        </tr>
        {% for row in top30_by_province %}
            <tr>
                <td>{{ row.user__data__province__name }}</td>
                <td>{{ row.count }}</td>
            </tr>
        {% endfor %}
    </table>

    <h3>Эхний 30 байр – Бүс
        <small class="text-muted">(Нийт {{ top30_count }} сурагч)</small>
    </h3>
    <table class="table table-bordered">
        <tr>
            <th>Бүс</th>
            <th>Сурагчдын тоо</th>
        </tr>
        {% for row in top30_by_zone %}
            <tr>
                <td>{{ row.user__data__province__zone__name }}</td>
                <td>{{ row.count }}</td>
            </tr>
        {% endfor %}
    </table>


    <h3>Эхний 30 байр – Бүс</h3>
    <table class="table table-bordered">
        <tr>
            <th>Бүс</th>
            <th>Сурагчдын тоо</th>
        </tr>
        {% for row in top30_by_zone %}
            <tr>
                <td>{{ row.user__data__province__zone__name }}</td>
                <td>{{ row.count }}</td>
            </tr>
        {% endfor %}
    </table>

    <div class="mt-3">
        <a href="{% url 'olympiad_result_view' olympiad.id %}{% if selected_province != '0' %}?p={{ selected_province }}{% elif selected_zone != '0' %}?z={{ selected_zone }}{% endif %}"
           class="btn btn-primary">
            ← Дүнгийн хуудас руу буцах
        </a>
    </div>

{% endblock %}
