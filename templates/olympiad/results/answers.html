{% extends 'base.html' %}

{% block title %}
    {{ title }}
{% endblock %}

{% block content %}

    {% if school %}
        <h2 class="mb-1">Сурагчдын хариулт</h2>
        <p class="lead text-muted">{{ school.province.name }}, {{ school.name }}</p>
        <p class="lead text-muted">{{ school.user.first_name }}{% if request.user.is_staff %}, {{ school.user.data.mobile }}, {{ school.user.email }}{% endif %}</p>
        {% if top_n %}
        <div class="alert alert-warning d-flex justify-content-between align-items-center">
            <span><strong>Топ {{ top_n }} сурагч</strong> харуулж байна</span>
            <a href="{% url 'olympiad_answer_view' olympiad_id %}?s={{ school.id }}" class="btn btn-sm btn-outline-primary">
                Бүх сурагчдыг харах
            </a>
        </div>
        {% endif %}
    {% else %}
        <h2>{{ title }}</h2>
    {% endif %}

    <p class="lead">{{ name }}</p>

    <div class="p-3 mb-3 border border-secondary rounded bg-light">
        {% include './school_selection_menu.html' %}
    </div>

    {# Үр дүнгийн хүснэгт эсвэл зааварчилгааг харуулах #}
    {% if data %}
        {{ data | safe }}
    {% else %}
        {# Хэрэв аймаг сонгогдсон бол дараагийн алхмыг сануулах #}
        {% if selected_pid > 0 and not selected_sid > 0 %}
            <div class="alert alert-info mt-4">
                Үр дүнг харахын тулд сургуулиа сонгоно уу.
            </div>
            {# Хэрэв сургууль сонгосон ч үр дүн олдсонгүй бол #}
        {% elif selected_sid > 0 %}
            <div class="alert alert-warning mt-4">
                Сонгогдсон сургуулийн оролцогчдын мэдээлэл олдсонгүй.
            </div>
            {# Анхдагч зааварчилгаа #}
        {% else %}
            <div class="alert alert-light mt-4">
                Үр дүнг харахын тулд эхлээд аймаг, дараа нь сургуулиа сонгоно уу.
            </div>
        {% endif %}
    {% endif %}

{% endblock %}